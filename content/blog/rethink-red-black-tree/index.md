---
title: 重新认识红黑树
date: '2020-05-26T15:22:10+00:00'
description: 红黑树本质上是一种 2-3 平衡树。
---

几年前笔者刚开始找实习时，曾经面过四次阿里的一面，几乎每个面试官都会问这样一个问题，如何在一亿条数据中快速检索到某条数据？笔者当时并没有回答上来，反而觉得客户端没有处理这么多数据的场景。不过现在回想起来，一种可行的方案就是红黑树了。

我们都知道红黑树既是二叉搜索树又是平衡二叉树，最坏情况下的时间复杂度为 $2\log_{2}N$，所以当 $N=100000000$ 时至多需要大约 44 次检索即可。红黑树之所以如此高效，是因为 [其定义](https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91) 保证了它在最坏情况下也基本是自平衡的：

> 1. 节点是红色或黑色
> 2. 根是黑色
> 3. 所有叶子都是黑色，注意叶子是 NIL 节点
> 4. 每个红色节点必须有两个黑色的子节点，即从每个叶子到根的所有路径上不能有两个连续的红色节点
> 5. 从任一节点到其每个叶子的所有 [简单路径](https://zh.wikipedia.org/wiki/%E9%81%93%E8%B7%AF_(%E5%9B%BE%E8%AE%BA)) 都包含相同数目的黑色节点

![维基百科的红黑树示意图](./wikipedia-red-black-tree.png)

TODO
